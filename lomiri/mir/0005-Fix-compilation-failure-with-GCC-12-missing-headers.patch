From 6a2149f338e3f06f90fca88c16a4fadb584db09b Mon Sep 17 00:00:00 2001
From: Anton Gladky <gladk@debian.org>
Date: Sun, 9 Oct 2022 07:42:09 +0200
Subject: [PATCH 5/5] Fix compilation failure with GCC-12 (missing headers)

---
 src/client/rpc/mir_protobuf_rpc_channel.cpp                | 1 +
 src/renderers/gl/renderer.h                                | 1 +
 src/server/glib_main_loop_sources.cpp                      | 1 +
 tests/acceptance-tests/test_presentation_chain.cpp         | 1 +
 tests/acceptance-tests/test_prompt_session_client_api.cpp  | 1 +
 tests/unit-tests/compositor/test_multi_monitor_arbiter.cpp | 1 +
 tests/unit-tests/scene/test_application_session.cpp        | 1 +
 tests/unit-tests/scene/test_basic_surface.cpp              | 1 +
 tests/unit-tests/test_glib_main_loop.cpp                   | 1 +
 tests/unit-tests/test_posix_rw_mutex.cpp                   | 1 +
 10 files changed, 10 insertions(+)

diff --git a/src/client/rpc/mir_protobuf_rpc_channel.cpp b/src/client/rpc/mir_protobuf_rpc_channel.cpp
index b12abd15c6..00f55f0c3b 100644
--- a/src/client/rpc/mir_protobuf_rpc_channel.cpp
+++ b/src/client/rpc/mir_protobuf_rpc_channel.cpp
@@ -47,6 +47,7 @@
 
 #include <stdexcept>
 #include <cstring>
+#include <array>
 
 namespace mf = mir::frontend;
 namespace mev = mir::events;
diff --git a/src/renderers/gl/renderer.h b/src/renderers/gl/renderer.h
index 87dd49747a..368896f6be 100644
--- a/src/renderers/gl/renderer.h
+++ b/src/renderers/gl/renderer.h
@@ -32,6 +32,7 @@
 #include <unordered_map>
 #include <unordered_set>
 #include <vector>
+#include <array>
 
 namespace mir
 {
diff --git a/src/server/glib_main_loop_sources.cpp b/src/server/glib_main_loop_sources.cpp
index 4b29460d26..bfea92429f 100644
--- a/src/server/glib_main_loop_sources.cpp
+++ b/src/server/glib_main_loop_sources.cpp
@@ -23,6 +23,7 @@
 
 #include <algorithm>
 #include <atomic>
+#include <array>
 #include <system_error>
 #include <sstream>
 
diff --git a/tests/acceptance-tests/test_presentation_chain.cpp b/tests/acceptance-tests/test_presentation_chain.cpp
index 9854c43ba9..41fc97a73c 100644
--- a/tests/acceptance-tests/test_presentation_chain.cpp
+++ b/tests/acceptance-tests/test_presentation_chain.cpp
@@ -33,6 +33,7 @@
 #include "mir/raii.h"
 
 #include <atomic>
+#include <array>
 #include <gtest/gtest.h>
 #include <gmock/gmock.h>
 
diff --git a/tests/acceptance-tests/test_prompt_session_client_api.cpp b/tests/acceptance-tests/test_prompt_session_client_api.cpp
index c83931e640..c5d6f12da4 100644
--- a/tests/acceptance-tests/test_prompt_session_client_api.cpp
+++ b/tests/acceptance-tests/test_prompt_session_client_api.cpp
@@ -38,6 +38,7 @@
 #include <condition_variable>
 #include <mutex>
 #include <atomic>
+#include <array>
 
 namespace mtd = mir::test::doubles;
 namespace mtf = mir_test_framework;
diff --git a/tests/unit-tests/compositor/test_multi_monitor_arbiter.cpp b/tests/unit-tests/compositor/test_multi_monitor_arbiter.cpp
index 8d1b729aef..53d81af1ef 100644
--- a/tests/unit-tests/compositor/test_multi_monitor_arbiter.cpp
+++ b/tests/unit-tests/compositor/test_multi_monitor_arbiter.cpp
@@ -23,6 +23,7 @@
 #include "src/server/compositor/schedule.h"
 
 #include <gtest/gtest.h>
+#include <array>
 using namespace testing;
 namespace mt = mir::test;
 namespace mtd = mir::test::doubles;
diff --git a/tests/unit-tests/scene/test_application_session.cpp b/tests/unit-tests/scene/test_application_session.cpp
index c11fda3b74..2d94eae15a 100644
--- a/tests/unit-tests/scene/test_application_session.cpp
+++ b/tests/unit-tests/scene/test_application_session.cpp
@@ -44,6 +44,7 @@
 
 #include <gmock/gmock.h>
 #include <gtest/gtest.h>
+#include <array>
 
 namespace mc = mir::compositor;
 namespace mf = mir::frontend;
diff --git a/tests/unit-tests/scene/test_basic_surface.cpp b/tests/unit-tests/scene/test_basic_surface.cpp
index 46ef446436..c72f48d06d 100644
--- a/tests/unit-tests/scene/test_basic_surface.cpp
+++ b/tests/unit-tests/scene/test_basic_surface.cpp
@@ -39,6 +39,7 @@
 #include <future>
 #include <gtest/gtest.h>
 #include <gmock/gmock.h>
+#include <array>
 
 namespace mc = mir::compositor;
 namespace mf = mir::frontend;
diff --git a/tests/unit-tests/test_glib_main_loop.cpp b/tests/unit-tests/test_glib_main_loop.cpp
index 86dc43eb68..09a90aa894 100644
--- a/tests/unit-tests/test_glib_main_loop.cpp
+++ b/tests/unit-tests/test_glib_main_loop.cpp
@@ -32,6 +32,7 @@
 #include <gtest/gtest.h>
 #include <gmock/gmock.h>
 
+#include <array>
 #include <thread>
 
 namespace mt = mir::test;
diff --git a/tests/unit-tests/test_posix_rw_mutex.cpp b/tests/unit-tests/test_posix_rw_mutex.cpp
index 463fde304e..de6abf8abc 100644
--- a/tests/unit-tests/test_posix_rw_mutex.cpp
+++ b/tests/unit-tests/test_posix_rw_mutex.cpp
@@ -26,6 +26,7 @@
 #include <shared_mutex>
 #include <thread>
 #include <atomic>
+#include <array>
 
 #include <gtest/gtest.h>
 
-- 
2.38.1

